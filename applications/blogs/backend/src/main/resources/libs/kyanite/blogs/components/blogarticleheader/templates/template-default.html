<!--/*
  ~
  ~     Copyright (C) 2023 Dynamic Solutions
  ~
  ~     Licensed under the Apache License, Version 2.0 (the "License");
  ~     you may not use this file except in compliance with the License.
  ~     You may obtain a copy of the License at
  ~
  ~         http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~     Unless required by applicable law or agreed to in writing, software
  ~     distributed under the License is distributed on an "AS IS" BASIS,
  ~     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~     See the License for the specific language governing permissions and
  ~     limitations under the License.
  ~
*/-->

<template data-sly-template.template="${ @ model}">
  <sly data-sly-test.blog="${model.blogArticleHeaderModel}">
    <sly data-sly-test.author="${model.authorInfoModel}">
      <div class="container blog-article-header">
        <div class="tags are-normal">
          <sly data-sly-list.item="${blog.tags}">
              <span class="tag is-normal">
                 ${item.text}
              </span>
          </sly>
        </div>
        <h1 class="title is-4" data-sly-test.title="${blog.title}">${title}</h1>
        <article class="media">
          <figure class="media-left">
            <p class="image is-48x48">
              <sly data-sly-set.leadsToAuthorPage="
              ${ (    (author.authorOwnerPath != null)
                  &&  (author.authorOwnerPath != currentPage.path) ) }"></sly>
              <a data-sly-unwrap="${!leadsToAuthorPage}"
                 href="${author.authorOwnerUrl}" target="">
                <img width="48" height="48"  data-sly-test.authorPhoto="${author.authorPhoto}" class="is-rounded"
                     src="${authorPhoto}" alt="${author.authorPhotoAlt}">
              </a>
            </p>
          </figure>
          <div class="media-content">
            <div class="content has-text-weight-normal">
              <p>
                <strong data-sly-test.authorName="${author.authorName}">${authorName}</strong>
                <br>
                <small
                    data-sly-test.publicationDate="${blog.formattedPublicationDate}">${publicationDate}</small>
                <small data-sly-test.readTime="${blog.readTime}">${'{0} min read' @ format=[readTime],
                  i18n}</small>
              </p>
            </div>
          </div>
        </article>
        <figure class="image">
          <img width="1200" height="800" data-sly-test.heroImage="${blog.heroImage}" src="${heroImage}"
               alt="${blog.heroImageAlt}">
        </figure>
      </div>  </sly>

    <sly data-sly-test="${wcmmode.isEdit}">
      <sly data-sly-test.errMessage="${model.authorInfoErrMessage}">
        <div>Failed to retrieve author info</div>
        <div>${errMessage}</div>
      </sly>
    </sly>
  </sly>
</template>
